<div class="module-bar" data-module="circuit">
    <button class="module-bar-title">suitkaise.circuit</button>
    <nav class="module-bar-nav">
        <a href="#circuit-why" class="module-bar-link active" data-page="circuit-why">why</a>
        <a href="#circuit" class="module-bar-link" data-page="circuit">how to use</a>
        <a href="#circuit-how-it-works" class="module-bar-link" data-page="circuit-how-it-works">how it works</a>
        <a href="#circuit-videos" class="module-bar-link" data-page="circuit-videos">videos</a>
        <a href="#circuit-tests" class="module-bar-link" data-page="circuit-tests">tests</a>
        <a href="#circuit-examples" class="module-bar-link" data-page="circuit-examples">examples</a>
    </nav>
</div>
<section class="module-page why-page">
    <h1>Why <code>circuit</code>?</h1>

    <p>This is a super simple module that I added in.</p>
    
    <p>Here is why:</p>
    
    <ul>
        <li>cleaner code — no more <code>while True</code> with <code>break</code></li>
        <li>thread safety — share a circuit across multiple threads</li>
        <li>easier to think about — circuit breakers are real-world things</li>
        <li>readable — <code>while not circ.broken</code> is easy to spot when reading code</li>
        <li>error handling — counts failures and makes for clearer error handling</li>
        <li>optional sleep — add cooldown periods after failure thresholds</li>
    </ul>
    
    <p>It is purely for your quality of life! Cheers</p>

    <h3>Without <code>circuit</code> - <em>8 lines</em></h3>

    <details>
        <summary>Show code</summary>
        <div class="dropdown-content">
<pre><code class="language-python"># count failures manually
import time # 1

failures = 0 # 2
max_failures = 5 # 3

while failures < max_failures:
    try:
        result = something_that_might_fail()
        break  # Success, exit loop
    except SomeError:
        failures += 1 # 4
        if failures >= max_failures: # 5
            break # 6
        time.sleep(0.5)  # 7

if failures >= max_failures: # 8
    print("Failed after the given number of attempts")</code></pre>
        </div>
    </details>

    <h3>With <code>circuit</code> - <em>4 lines</em></h3>

    <ul>
        <li>clearer</li>
        <li>no variables to track</li>
        <li>no clutter</li>
    </ul>

<pre><code class="language-python">from suitkaise import circuit # 1

circ = circuit.Circuit(5, 1) # 2

while not circ.broken:
    try:
        result = something_that_might_fail()
        break  # Success, exit loop
    except SomeError:
        circ.short()  # 3

if circ.broken: # 4
    print("Failed after the given number of attempts")</code></pre>

</section>
