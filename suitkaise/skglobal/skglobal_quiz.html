<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKGlobal Mastery Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-container {
            background: #ecf0f1;
            padding: 20px;
            text-align: center;
        }

        .progress-bar {
            background: #bdc3c7;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .quiz-content {
            padding: 30px;
        }

        .question-card {
            display: none;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
        }

        .question-card.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: #3498db;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .difficulty {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: auto;
        }

        .difficulty.easy { background: #2ecc71; color: white; }
        .difficulty.medium { background: #f39c12; color: white; }
        .difficulty.hard { background: #e74c3c; color: white; }

        .question-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: white;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: #3498db;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #3498db;
            background: #ebf3fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fdf2f2;
        }

        .explanation {
            display: none;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .score-display {
            text-align: center;
            font-size: 1.1em;
            color: #7f8c8d;
        }

        .results {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .final-score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-excellent { color: #27ae60; }
        .score-good { color: #f39c12; }
        .score-needs-work { color: #e74c3c; }

        .feature-coverage {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .feature-check {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .restart-btn {
            background: #9b59b6;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .restart-btn:hover {
            background: #8e44ad;
        }

        .hint {
            background: #e8f5e8;
            border-left: 4px solid #27ae60;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ SKGlobal Mastery Quiz</h1>
            <p>Test your knowledge of all SKGlobal features and best practices</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="score-display">
                Question <span id="currentQuestion">1</span> of <span id="totalQuestions">15</span> | 
                Score: <span id="currentScore">0</span>/<span id="maxScore">15</span>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- Questions will be inserted here -->
        </div>

        <div class="results" id="results">
            <h2>Quiz Complete! üéâ</h2>
            <div class="final-score" id="finalScore">0/15</div>
            <div id="scoreMessage"></div>
            
            <div class="feature-coverage">
                <h3>Feature Coverage Analysis</h3>
                <div id="featureCoverage"></div>
            </div>

            <button class="btn restart-btn" onclick="restartQuiz()">Take Quiz Again</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                difficulty: "easy",
                category: "basics",
                question: "What's the simplest way to create a global variable with SKGlobal?",
                code: null,
                options: [
                    "SKGlobal.new('name', value)",
                    "create_global('name', value)",
                    "global_var('name', value)",
                    "GlobalVariable('name', value)"
                ],
                correct: 1,
                explanation: "The `create_global()` function is the main convenience function for creating global variables. It handles all the setup and returns an SKGlobal instance."
            },
            {
                id: 2,
                difficulty: "easy",
                category: "basics",
                question: "How do you retrieve the value from an SKGlobal variable?",
                code: "my_global = create_global('test', 'hello')",
                options: [
                    "my_global.value",
                    "my_global.get()",
                    "my_global.retrieve()",
                    "my_global['value']"
                ],
                correct: 1,
                explanation: "Use the `.get()` method to retrieve the current value of a global variable. This ensures you get the most up-to-date value, even if it was modified by another process."
            },
            {
                id: 3,
                difficulty: "medium",
                category: "hierarchy",
                question: "What's the difference between TOP and UNDER level global variables?",
                code: null,
                options: [
                    "TOP variables are faster, UNDER variables are slower",
                    "TOP variables are stored at project root and see everything, UNDER variables are directory-specific",
                    "TOP variables are public, UNDER variables are private",
                    "There's no difference, it's just naming"
                ],
                correct: 1,
                explanation: "TOP level variables are stored at your project root and can aggregate data from all directories. UNDER level variables are specific to the directory where they're created but automatically sync up to the TOP level."
            },
            {
                id: 4,
                difficulty: "medium",
                category: "persistence",
                question: "What happens when you set persistent=False?",
                code: "temp_var = create_global('cache', data, persistent=False)",
                options: [
                    "The variable is deleted immediately",
                    "The variable is only kept in memory and not saved to disk",
                    "The variable cannot be accessed by other processes",
                    "The variable expires after 1 hour"
                ],
                correct: 1,
                explanation: "Setting persistent=False means the variable exists only in memory during the current session and won't be saved to the .sk files on disk. This is perfect for temporary cache data."
            },
            {
                id: 5,
                difficulty: "easy",
                category: "expiration",
                question: "How do you create a global variable that automatically deletes itself after 5 minutes?",
                code: null,
                options: [
                    "create_global('name', value, expire=300)",
                    "create_global('name', value, remove_in=300)",
                    "create_global('name', value, timeout=300)",
                    "create_global('name', value, ttl=300)"
                ],
                correct: 1,
                explanation: "The `remove_in` parameter specifies the number of seconds before the variable is automatically removed. 300 seconds = 5 minutes."
            },
            {
                id: 6,
                difficulty: "hard",
                category: "sync",
                question: "When should you set auto_sync=False?",
                code: null,
                options: [
                    "When you want the variable to be private",
                    "When your data is not serializable or you don't need cross-process sharing",
                    "When you want faster performance always",
                    "When working with large files"
                ],
                correct: 1,
                explanation: "Set auto_sync=False when your data contains non-serializable objects (like file handles, database connections) or when you don't need to share the variable between different processes. This also improves performance for local-only variables."
            },
            {
                id: 7,
                difficulty: "medium",
                category: "retrieval",
                question: "What does get_global() return if the variable doesn't exist?",
                code: "result = get_global('nonexistent_var')",
                options: [
                    "Raises an exception",
                    "Returns an empty SKGlobal object",
                    "Returns None",
                    "Returns an empty string"
                ],
                correct: 2,
                explanation: "get_global() returns None if the variable doesn't exist. This allows you to safely check `if result:` before using the variable."
            },
            {
                id: 8,
                difficulty: "hard",
                category: "delayed",
                question: "What's the purpose of delayed creation with auto_create=False?",
                code: `my_global, creator = SKGlobal.create(
    name='delayed', 
    value={'data': 'test'}, 
    auto_create=False
)`,
                options: [
                    "To improve performance",
                    "To validate the name first",
                    "To set up the variable but create it only when needed",
                    "To create multiple variables at once"
                ],
                correct: 2,
                explanation: "Delayed creation lets you set up a global variable configuration but only actually create it when you call the creator function. This is useful for conditional creation or when you need to validate conditions first."
            },
            {
                id: 9,
                difficulty: "medium",
                category: "testing",
                question: "What's the safest way to test code that uses SKGlobals?",
                code: null,
                options: [
                    "Just create and delete variables manually",
                    "Use the test_session() context manager",
                    "Create variables in a separate directory",
                    "Use only non-persistent variables"
                ],
                correct: 1,
                explanation: "The test_session() context manager automatically cleans up .sk files when your test completes, preventing test pollution and ensuring a clean environment for each test run."
            },
            {
                id: 10,
                difficulty: "hard",
                category: "error_handling",
                question: "What happens if you try to create a global variable with a name that already exists?",
                code: null,
                options: [
                    "It overwrites the existing variable",
                    "It raises an SKGlobalValueError",
                    "It creates a new variable with a suffix",
                    "It merges with the existing variable"
                ],
                correct: 1,
                explanation: "SKGlobal validates name uniqueness across the entire system and raises an SKGlobalValueError if you try to create a variable with an existing name. This prevents accidental overwrites."
            },
            {
                id: 11,
                difficulty: "medium",
                category: "monitoring",
                question: "How can you check the health of your SKGlobal system?",
                code: null,
                options: [
                    "Check if files exist in .sk directory",
                    "Use the health_check() function",
                    "Try to create a test variable",
                    "Check the logs"
                ],
                correct: 1,
                explanation: "The health_check() function performs a comprehensive health check on all SKGlobal components and returns a status report including any issues found."
            },
            {
                id: 12,
                difficulty: "easy",
                category: "file_management",
                question: "Where does SKGlobal store its data files?",
                code: null,
                options: [
                    "In the system temp directory",
                    "In a .sk directory at your project root",
                    "In your home directory",
                    "In the Python installation directory"
                ],
                correct: 1,
                explanation: "SKGlobal creates a .sk directory at your project root to store all variable data. This keeps everything organized and makes cleanup easy."
            },
            {
                id: 13,
                difficulty: "hard",
                category: "serialization",
                question: "Which of these data types CANNOT be stored in an auto_sync=True global variable?",
                code: null,
                options: [
                    "{'name': 'John', 'age': 30}",
                    "lambda x: x * 2",
                    "[1, 2, 3, 'hello', True]",
                    "datetime.datetime.now().isoformat()"
                ],
                correct: 1,
                explanation: "Lambda functions (and other non-serializable objects like file handles, database connections) cannot be stored in auto_sync variables because they can't be converted to JSON for cross-process sharing. Support for some objects may be added in the future."
            },
            {
                id: 14,
                difficulty: "medium",
                category: "best_practices",
                question: "What's the best practice for handling missing global variables in production code?",
                code: null,
                options: [
                    "Always assume they exist",
                    "Use try/except blocks around every access",
                    "Check if get_global() returns None and provide defaults",
                    "Create them if they don't exist"
                ],
                correct: 2,
                explanation: "Always check if get_global() returns None and provide sensible defaults. This makes your code robust against missing configuration or temporary storage issues."
            },
            {
                id: 15,
                difficulty: "hard",
                category: "advanced",
                question: "What's the correct way to share data between two Python scripts running simultaneously?",
                code: `# Script 1
producer = create_global('shared_data', {'status': 'starting'})

# Script 2  
consumer = get_global('shared_data')`,
                options: [
                    "Both scripts need auto_sync=False for speed",
                    "Both scripts need auto_sync=True (default) and persistent=True (default)",
                    "Only Script 1 needs auto_sync=True",
                    "Use persistent=False for better performance"
                ],
                correct: 1,
                explanation: "For cross-process sharing, both scripts need auto_sync=True (which is the default) and persistent=True (also default). This ensures the data is properly serialized and accessible across process boundaries."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let quizCompleted = false;

        const categories = {
            basics: "Basic Usage",
            hierarchy: "Storage Hierarchy", 
            persistence: "Persistence Control",
            expiration: "Auto-Expiration",
            sync: "Cross-Process Sync",
            retrieval: "Variable Retrieval",
            delayed: "Advanced Creation",
            testing: "Testing & Cleanup",
            error_handling: "Error Handling",
            monitoring: "System Monitoring",
            file_management: "File Management",
            serialization: "Data Serialization",
            best_practices: "Best Practices",
            advanced: "Advanced Features"
        };

        function initQuiz() {
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('maxScore').textContent = questions.length;
            showQuestion(0);
        }

        function showQuestion(index) {
            const question = questions[index];
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = `
                <div class="question-card active">
                    <div class="question-header">
                        <span class="question-number">Question ${index + 1}</span>
                        <span class="difficulty ${question.difficulty}">${question.difficulty.toUpperCase()}</span>
                    </div>
                    
                    <div class="question-text">
                        ${question.question}
                    </div>
                    
                    ${question.code ? `<div class="code-block">${question.code}</div>` : ''}
                    
                    <div class="options" id="options">
                        ${question.options.map((option, i) => `
                            <div class="option" onclick="selectOption(${i})" data-index="${i}">
                                ${String.fromCharCode(65 + i)}. ${option}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation">
                        <h4>üí° Explanation</h4>
                        <p>${question.explanation}</p>
                    </div>
                    
                    <div class="buttons">
                        <button class="btn btn-primary" onclick="prevQuestion()" ${index === 0 ? 'style="visibility: hidden"' : ''}>
                            ‚Üê Previous
                        </button>
                        <button class="btn btn-success" id="nextBtn" onclick="nextQuestion()" disabled>
                            ${index === questions.length - 1 ? 'Finish Quiz' : 'Next ‚Üí'}
                        </button>
                    </div>
                </div>
            `;

            updateProgress();
        }

        function selectOption(selectedIndex) {
            const options = document.querySelectorAll('.option');
            const question = questions[currentQuestionIndex];
            
            // Remove previous selections
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Mark selected option
            options[selectedIndex].classList.add('selected');
            
            // Show correct/incorrect
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            // Store answer
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            // Update score
            if (selectedIndex === question.correct) {
                if (!document.querySelector('.option.correct').classList.contains('scored')) {
                    score++;
                    document.querySelector('.option.correct').classList.add('scored');
                }
            }
            
            // Show explanation
            document.getElementById('explanation').classList.add('show');
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
            
            updateScore();
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                finishQuiz();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
                
                // If already answered, show the previous answer
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    selectOption(userAnswers[currentQuestionIndex]);
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = score;
        }

        function finishQuiz() {
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('results').classList.add('show');
            
            const percentage = Math.round((score / questions.length) * 100);
            const finalScoreEl = document.getElementById('finalScore');
            const scoreMessageEl = document.getElementById('scoreMessage');
            
            finalScoreEl.textContent = `${score}/${questions.length} (${percentage}%)`;
            
            if (percentage >= 90) {
                finalScoreEl.className = 'final-score score-excellent';
                scoreMessageEl.innerHTML = `
                    <h3>üåü Excellent! SKGlobal Master!</h3>
                    <p>You have mastered all aspects of SKGlobal. You understand the hierarchy, cross-process sync, persistence, and advanced features. You're ready to use SKGlobal effectively in any project!</p>
                `;
            } else if (percentage >= 70) {
                finalScoreEl.className = 'final-score score-good';
                scoreMessageEl.innerHTML = `
                    <h3>üëç Good Job! SKGlobal Practitioner</h3>
                    <p>You have a solid understanding of SKGlobal. Review the areas you missed and you'll be ready for advanced usage. Focus on the advanced features and edge cases.</p>
                `;
            } else {
                finalScoreEl.className = 'final-score score-needs-work';
                scoreMessageEl.innerHTML = `
                    <h3>üìö Keep Learning! SKGlobal Beginner</h3>
                    <p>You're on the right track! Review the documentation and try the examples. Focus on understanding the basic concepts first, then move to advanced features.</p>
                `;
            }
            
            showFeatureCoverage();
        }

        function showFeatureCoverage() {
            const coverage = {};
            
            questions.forEach((question, index) => {
                const category = question.category;
                if (!coverage[category]) {
                    coverage[category] = { total: 0, correct: 0 };
                }
                coverage[category].total++;
                if (userAnswers[index] === question.correct) {
                    coverage[category].correct++;
                }
            });
            
            const coverageHtml = Object.entries(coverage).map(([category, data]) => {
                const percentage = Math.round((data.correct / data.total) * 100);
                const emoji = percentage >= 80 ? '‚úÖ' : percentage >= 60 ? '‚ö†Ô∏è' : '‚ùå';
                
                return `
                    <div class="feature-item">
                        <span class="feature-check">${emoji}</span>
                        <strong>${categories[category]}:</strong> ${data.correct}/${data.total} (${percentage}%)
                    </div>
                `;
            }).join('');
            
            document.getElementById('featureCoverage').innerHTML = coverageHtml;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            quizCompleted = false;
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('quizContent').style.display = 'block';
            
            showQuestion(0);
            updateScore();
        }

        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>